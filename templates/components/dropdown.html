{# Shadcn Dropdown Menu Component #}
{# Keyboard-navigable dropdown menu with click-outside support #}
{# Usage:
   <div x-data="{ open: false }" @click.outside="open = false">
     {% include "components/dropdown.html" with context %}
     {# dropdown_trigger_text="Menu", dropdown_items=[...] #}
   </div>
#}

<div class="relative inline-block">
  <!-- Trigger Button -->
  <button
    @click="open = !open"
    class="
      inline-flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium
      rounded-md border border-input
      bg-background text-foreground
      hover:bg-muted
      focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2
      focus-visible:ring-offset-background
      transition-colors
    "
  >
    {{ dropdown_trigger_text }}
    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
    </svg>
  </button>

  <!-- Dropdown Menu -->
  <div
    x-show="open"
    x-transition:enter="transition ease-out duration-100"
    x-transition:enter-start="opacity-0 scale-95 -translate-y-2"
    x-transition:enter-end="opacity-100 scale-100 translate-y-0"
    x-transition:leave="transition ease-in duration-75"
    x-transition:leave-start="opacity-100 scale-100"
    x-transition:leave-end="opacity-0 scale-95"
    class="
      absolute top-full left-0 mt-2 w-48 z-50
      bg-card text-card-foreground
      border border-border
      rounded-lg shadow-lg
    "
  >
    <div class="py-1">
      {% for item in dropdown_items %}
        {% if item.divider %}
          <div class="border-t border-border my-1"></div>
        {% else %}
          <button
            @click="open = false"
            class="
              w-full text-left px-4 py-2 text-sm
              text-foreground
              hover:bg-muted
              transition-colors
              {% if item.destructive %}text-destructive hover:bg-destructive/10{% endif %}
              {% if item.disabled %}opacity-50 cursor-not-allowed{% endif %}
            "
            {% if item.disabled %}disabled{% endif %}
          >
            <div class="flex items-center gap-2">
              {% if item.icon %}<span class="text-sm">{{ item.icon }}</span>{% endif %}
              {{ item.label }}
            </div>
          </button>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</div>
